// Execution should fail, as the package is not installed yet
===================
::exec:: exec main.toit
::exec:: Exit Code: 1
::exec:: main.toit:3:8: error: Package for prefix 'foo' not found
::exec:: import foo
::exec::        ^~
::exec:: main.toit:4:8: error: Package for prefix 'bar' not found
::exec:: import bar
::exec::        ^~
::exec:: main.toit:7:7: error: Unresolved identifier: 'say_hello'
::exec::   foo.say_hello
::exec::       ^~
::exec:: main.toit:8:7: error: Unresolved identifier: 'say_hello'
::exec::   bar.say_hello
::exec::       ^~
::exec:: Compilation failed.
::exec:: 
::check:: check main.toit
::check:: Exit Code: 0
::check:: 
===================
// Install packages from the registry
===================
pkg registry add --local test-reg registry
Exit Code: 0
===================
pkg install foo
Exit Code: 0
Info: Package '<TEST>/foo_git@1.2.3' installed with prefix 'foo'
===================
pkg install bar
Exit Code: 0
Info: Package '<TEST>/bar_git@2.0.1' installed with prefix 'bar'
===================
// Execution should succeed now
===================
::exec:: exec main.toit
::exec:: Exit Code: 0
::exec:: hello from foo 1.2.3
::exec:: hello from bar 2.0.1
::exec:: 
::check:: check main.toit
::check:: Exit Code: 0
::check:: 
===================
// Execution should fail, as the prefixes are not yet known
===================
::exec:: exec main2.toit
::exec:: Exit Code: 1
::exec:: main2.toit:3:8: error: Package for prefix 'pre1' not found
::exec:: import pre1.foo
::exec::        ^~
::exec:: main2.toit:4:8: error: Package for prefix 'pre2' not found
::exec:: import pre2.bar
::exec::        ^~
::exec:: main2.toit:7:7: error: Unresolved identifier: 'say_hello'
::exec::   foo.say_hello
::exec::       ^~
::exec:: main2.toit:8:7: error: Unresolved identifier: 'say_hello'
::exec::   bar.say_hello
::exec::       ^~
::exec:: Compilation failed.
::exec:: 
::check:: check main2.toit
::check:: Exit Code: 0
::check:: 
===================
pkg install --prefix=pre1 foo
Exit Code: 0
Info: Package '<TEST>/foo_git@1.2.3' installed with prefix 'pre1'
===================
pkg install --prefix=pre2 bar
Exit Code: 0
Info: Package '<TEST>/bar_git@2.0.1' installed with prefix 'pre2'
===================
// Execution should succeed now
===================
::exec:: exec main2.toit
::exec:: Exit Code: 0
::exec:: hello from foo 1.2.3
::exec:: hello from bar 2.0.1
::exec:: 
::check:: check main2.toit
::check:: Exit Code: 0
::check:: 
